<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airdrops Network Pro - Explora los Mejores Airdrops</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #ec4899;
            --dark: #1e293b;
            --light: #f8fafc;
            --gray: #94a3b8;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --border-radius: 12px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }
        
        body {
            background-color: #f1f5f9;
            color: var(--dark);
            line-height: 1.6;
        }
        
        /* [Todos tus otros estilos CSS existentes] */
        
        /* Estilos específicos para el buscador */
        .search-container {
            position: relative;
            margin-top: 1rem;
        }
        
        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 100;
            display: none;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .search-suggestion {
            padding: 0.8rem 1.2rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .search-suggestion:hover {
            background-color: #f1f5f9;
        }
        
        .search-suggestion.highlighted {
            background-color: #e2e8f0;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-parachute-box logo-icon"></i>
                    <span>Airdrops Network Pro</span>
                </div>
                
                <nav>
                    <ul>
                        <li><a href="#"><i class="fas fa-home"></i> Inicio</a></li>
                        <li><a href="#"><i class="fas fa-fire"></i> Trending</a></li>
                        <li><a href="#"><i class="fas fa-bookmark"></i> Guardados</a></li>
                        <li><a href="#"><i class="fas fa-info-circle"></i> Acerca de</a></li>
                        <li class="theme-toggle">
                            <i class="fas fa-moon"></i>
                            <span>Modo Oscuro</span>
                        </li>
                    </ul>
                </nav>
            </div>
            
            <div class="search-container">
                <input type="text" id="search-input" class="search-input" placeholder="Buscar airdrops..." autocomplete="off">
                <button class="search-btn"><i class="fas fa-search"></i></button>
                <div id="search-suggestions" class="search-suggestions"></div>
            </div>
        </div>
    </header>

    <section class="trending-prices container" style="margin-top: 2rem; display: none;">
        <div class="filter-section">
            <div class="filter-title">
                <i class="fas fa-chart-line"></i>
                <span>Trending Cryptocurrencies</span>
            </div>
            <div class="crypto-prices-container" id="crypto-prices-container">
                <div class="loading-spinner">
                    <i class="fas fa-spinner fa-spin"></i> Loading cryptocurrency prices...
                </div>
            </div>
        </div>
    </section>

    <section class="hero container">
        <h1>Discover the Best Crypto Airdrops</h1>
        <p>Explore a curated selection of the most promising airdrops in the crypto and blockchain ecosystem. Find opportunities in testnets, staking, gaming, and more.</p>
    </section>
    
    <main class="container">
        <section class="filter-section">
            <div class="filter-title">
                <i class="fas fa-filter"></i>
                <span>Filtrar por Categoría</span>
            </div>
            <div class="filter-options">
                <button class="filter-btn active" data-filter="all">Todos</button>
                <button class="filter-btn" data-filter="social">Social</button>
                <button class="filter-btn" data-filter="depin">DePIN</button>
                <button class="filter-btn" data-filter="testnet">Testnet</button>
                <button class="filter-btn" data-filter="node">Node</button>
                <button class="filter-btn" data-filter="gaming">Gaming</button>
                <button class="filter-btn" data-filter="staking">Staking</button>
            </div>
        </section>
        
        <div class="airdrop-grid" id="airdrop-grid">
            <!-- Los cards se generarán dinámicamente con JavaScript -->
        </div>
    </main>
    
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Airdrops Network Pro</h3>
                    <p>Your destination for the best crypto airdrops and opportunities in the blockchain space.</p>
                    <div class="social-links">
                        <a href="https://x.com/AirdropsANP" class="social-icon" target="_blank"><i class="fab fa-twitter"></i></a>
                        <a href="https://t.me/airdropsnetworkpro" class="social-icon" target="_blank"><i class="fab fa-telegram"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-discord"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-github"></i></a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3>Enlaces Rápidos</h3>
                    <ul class="footer-links">
                        <li><a href="#">Inicio</a></li>
                        <li><a href="#">Explorar</a></li>
                        <li><a href="#">Categorías</a></li>
                        <li><a href="#">Guías</a></li>
                        <li><a href="#">Blog</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Información</h3>
                    <ul class="footer-links">
                        <li><a href="#">About us</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of use</a></li>
                        <li><a href="https://mail.google.com/mail/?view=cm&fs=1&to=proafinder@gmail.com" id="contact" target="_blank">Contact</a></li>
                        <li><a href="#">FAQ</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Suscribirse</h3>
                    <p>Receive alerts about new airdrops directly to your email.</p>
                    <form>
                        <input type="email" placeholder="Your email" style="padding: 0.8rem; border-radius: var(--border-radius); border: none; width: 100%; margin-bottom: 0.8rem;">
                        <button type="submit" class="action-btn" style="width: 100%;">Suscribirse</button>
                    </form>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2025 Airdrops Network Pro. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Lightbox Modal -->
    <div id="lightbox-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9); z-index: 2000; justify-content: center; align-items: center; flex-direction: column;">
        <div style="position: absolute; top: 20px; right: 20px;">
            <button id="close-lightbox" style="background: none; border: none; color: white; font-size: 2rem; cursor: pointer;">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div style="max-width: 90%; max-height: 80%;">
            <img id="lightbox-image" src="" alt="Lightbox image" style="max-width: 100%; max-height: 80vh; object-fit: contain;">
        </div>
        <div id="lightbox-nav" style="display: flex; justify-content: center; gap: 1rem; margin-top: 1rem;">
            <button id="prev-image" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">
                <i class="fas fa-chevron-left"></i> Previous
            </button>
            <div id="image-counter" style="color: white; display: flex; align-items: center;"></div>
            <button id="next-image" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">
                Next <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>

    <script>
        // Variables globales
        let currentPage = 1;
        const itemsPerPage = 12;
        let allSearchTerms = [];
        let currentSuggestions = [];
        let highlightedIndex = -1;

        // Función para renderizar airdrops
        function renderAirdrops(filterType = 'all', page = 1) {
            const grid = document.getElementById('airdrop-grid');
            grid.innerHTML = '';
            
            const oldPagination = document.querySelector('.pagination');
            if (oldPagination) oldPagination.remove();
            
            const filteredAirdrops = filterType === 'all' 
                ? airdrops 
                : airdrops.filter(airdrop => airdrop.type === filterType);
            
            const totalPages = Math.ceil(filteredAirdrops.length / itemsPerPage);
            const startIndex = (page - 1) * itemsPerPage;
            const endIndex = Math.min(startIndex + itemsPerPage, filteredAirdrops.length);
            const paginatedAirdrops = filteredAirdrops.slice(startIndex, endIndex);
            
            if (paginatedAirdrops.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <div class="empty-state-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3>No se encontraron airdrops</h3>
                        <p>There are no airdrops available in this category. Please try another category.</p>
                        <button class="action-btn" onclick="renderAirdrops('all')">Ver todos los airdrops</button>
                    </div>
                `;
                return;
            }
            
            paginatedAirdrops.forEach(airdrop => {
                const card = document.createElement('div');
                card.className = 'airdrop-card';
                card.setAttribute('data-type', airdrop.type);
                let isNew = false;
                
                if (airdrop.publishDate) {
                    const pubDate = airdrop.publishDate instanceof Date ? 
                        airdrop.publishDate : 
                        new Date(airdrop.publishDate);
                    const diffDays = (new Date() - pubDate) / (1000 * 60 * 60 * 24);
                    isNew = !isNaN(diffDays) && diffDays < 4;
                }
                
                const publishDateFormatted = airdrop.publishDate ? 
                    new Intl.DateTimeFormat('es-ES', {
                        day: 'numeric',
                        month: 'long',
                        year: 'numeric'
                    }).format(airdrop.publishDate) : '';
                
                let badgesHTML = '';
                if (airdrop.badges && airdrop.badges.length) {
                    airdrop.badges.forEach(badge => {
                        let badgeClass = 'badge-primary';
                        let badgeText = '';
                        let badgeUrl = '';
                        if (typeof badge === 'string') {
                            badgeText = badge;
                            if (badge === 'Web' && airdrop.webUrl) {
                                badgeUrl = airdrop.webUrl;
                            } else if (badge === 'X' && airdrop.xUrl) {
                                badgeUrl = airdrop.xUrl;
                            } else if (badge === 'Docs' && airdrop.docsUrl) {
                                badgeUrl = airdrop.docsUrl;
                            } else {
                                badgeUrl = '#';
                            }
                            if (badge.toLowerCase().includes('depin')) badgeClass = 'badge-info';
                            if (badge.toLowerCase().includes('testnet')) badgeClass = 'badge-warning';
                            if (badge.toLowerCase().includes('staking')) badgeClass = 'badge-success';
                            if (badge.toLowerCase().includes('gaming')) badgeClass = 'badge-danger';
                            if (badge.toLowerCase().includes('social')) badgeClass = 'badge-primary';
                        }
                        
                        badgesHTML += `<a href="${badgeUrl}" class="badge ${badgeClass}" target="_blank">${badgeText}</a>`;
                    });
                }
                
                card.innerHTML = `
                    <div class="card-type">${airdrop.type.charAt(0).toUpperCase() + airdrop.type.slice(1)}</div>
                    ${isNew ? '<div class="new-badge">NEW</div>' : ''}
                    <div class="card-image" style="background-image: url('${airdrop.image}')"></div>
                    <div class="publish-date">Publicado: ${publishDateFormatted}</div>
                    <div class="card-content">
                        <h3 class="card-title">${airdrop.title}</h3>
                        <p class="card-description">${airdrop.description}</p>
                        <div class="card-details">
                            <div class="detail-item">
                                <i class="fas fa-calendar-alt detail-icon"></i>
                                <span>Available: ${airdrop.launchDate}</span>
                            </div>
                            ${airdrop.funds ? `
                                <div class="detail-item">
                                    <i class="fas fa-coins detail-icon"></i>
                                    <span>Funding: ${airdrop.funds}</span>
                                </div>
                            ` : ''}
                            ${airdrop.code ? `
                                <div class="detail-item">
                                    <i class="fas fa-key detail-icon"></i>
                                    <span>Code: ${airdrop.code}</span>
                                </div>
                            ` : ''}
                        </div>
                        <div>
                            ${badgesHTML}
                        </div>
                        <div class="card-actions">
                            <div style="display: flex; gap: 0.5rem; flex: 1;">
                                <a href="${airdrop.link || '#'}" class="action-btn" target="_blank" style="flex: 1; text-align: center;">Learn More</a>
                                <button class="details-btn" data-id="${airdrop.id}" style="flex: 1; text-align: center;">See More</button>
                            </div>
                            <button class="bookmark-btn"><i class="far fa-bookmark"></i></button>
                        </div>
                    </div>
                `;
                
                grid.appendChild(card);
            });
            
            document.querySelectorAll('.bookmark-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.classList.toggle('saved');
                    const icon = this.querySelector('i');
                    icon.classList.toggle('far');
                    icon.classList.toggle('fas');
                });
            });
            
            if (filteredAirdrops.length > itemsPerPage) {
                const paginationContainer = document.createElement('div');
                paginationContainer.className = 'pagination';
                
                const prevBtn = document.createElement('button');
                prevBtn.className = 'pagination-btn';
                prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i>';
                prevBtn.disabled = page === 1;
                if (page > 1) {
                    prevBtn.addEventListener('click', () => renderAirdrops(filterType, page - 1));
                }
                
                const pageButtons = document.createElement('div');
                pageButtons.style.display = 'flex';
                pageButtons.style.gap = '0.5rem';
                
                const startPage = Math.max(1, page - 2);
                const endPage = Math.min(totalPages, page + 2);
                
                for (let i = startPage; i <= endPage; i++) {
                    const pageBtn = document.createElement('button');
                    pageBtn.className = `pagination-btn ${i === page ? 'active' : ''}`;
                    pageBtn.textContent = i;
                    pageBtn.addEventListener('click', () => renderAirdrops(filterType, i));
                    pageButtons.appendChild(pageBtn);
                }
                
                const nextBtn = document.createElement('button');
                nextBtn.className = 'pagination-btn';
                nextBtn.innerHTML = '<i class="fas fa-chevron-right"></i>';
                nextBtn.disabled = page === totalPages;
                if (page < totalPages) {
                    nextBtn.addEventListener('click', () => renderAirdrops(filterType, page + 1));
                }
                
                paginationContainer.appendChild(prevBtn);
                paginationContainer.appendChild(pageButtons);
                paginationContainer.appendChild(nextBtn);
                
                grid.parentNode.insertBefore(paginationContainer, grid.nextSibling);
            }
        }

        // Función para extraer términos de búsqueda
        function extractSearchTerms() {
            const terms = new Set();
            airdrops.forEach(airdrop => {
                airdrop.title.split(' ').forEach(word => {
                    if (word.length > 2) terms.add(word.toLowerCase());
                });
                airdrop.description.split(' ').forEach(word => {
                    if (word.length > 3) terms.add(word.toLowerCase());
                });
                if (airdrop.badges) {
                    airdrop.badges.forEach(badge => {
                        if (typeof badge === 'string') {
                            badge.split(' ').forEach(word => {
                                if (word.length > 2) terms.add(word.toLowerCase());
                            });
                        }
                    });
                }
            });
            allSearchTerms = Array.from(terms);
        }

        // Función para mostrar sugerencias
        function showSuggestions() {
            const input = document.getElementById('search-input');
            const suggestionsContainer = document.getElementById('search-suggestions');
            const term = input.value.toLowerCase();
            
            if (term.length < 2) {
                suggestionsContainer.style.display = 'none';
                return;
            }
            
            currentSuggestions = allSearchTerms.filter(word => 
                word.startsWith(term)
            ).slice(0, 5);
            
            if (currentSuggestions.length > 0) {
                suggestionsContainer.innerHTML = currentSuggestions.map((suggestion, index) => `
                    <div class="search-suggestion ${index === highlightedIndex ? 'highlighted' : ''}"
                        data-term="${suggestion}">
                        <i class="fas fa-search" style="margin-right: 8px; color: var(--gray);"></i>
                        ${suggestion}
                    </div>
                `).join('');
                suggestionsContainer.style.display = 'block';
                
                document.querySelectorAll('.search-suggestion').forEach((suggestion, index) => {
                    suggestion.addEventListener('click', () => {
                        input.value = suggestion.getAttribute('data-term');
                        suggestionsContainer.style.display = 'none';
                        performSearch();
                    });
                });
            } else {
                suggestionsContainer.style.display = 'none';
            }
        }

        // Función para realizar la búsqueda
        function performSearch() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            currentPage = 1;
            
            if (!searchTerm) {
                const activeFilter = document.querySelector('.filter-btn.active').getAttribute('data-filter');
                renderAirdrops(activeFilter, currentPage);
                return;
            }
            
            const activeFilter = document.querySelector('.filter-btn.active').getAttribute('data-filter');
            const baseAirdrops = activeFilter === 'all' ? airdrops : airdrops.filter(a => a.type === activeFilter);
            
            const filteredAirdrops = baseAirdrops.filter(airdrop =>
                airdrop.title.toLowerCase().includes(searchTerm) ||
                airdrop.description.toLowerCase().includes(searchTerm) ||
                (airdrop.badges && airdrop.badges.some(b => 
                    typeof b === 'string' && b.toLowerCase().includes(searchTerm)
                ))
            );
            
            renderSearchResults(filteredAirdrops, activeFilter);
        }

        // Función para renderizar resultados de búsqueda
        function renderSearchResults(filteredAirdrops, activeFilter) {
            const grid = document.getElementById('airdrop-grid');
            grid.innerHTML = '';
            
            if (filteredAirdrops.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <div class="empty-state-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3>No se encontraron resultados</h3>
                        <p>No hay airdrops que coincidan con tu búsqueda.</p>
                        <button class="action-btn" onclick="renderAirdrops('${activeFilter}')">Ver todos los airdrops</button>
                    </div>
                `;
                return;
            }
            
            filteredAirdrops.forEach(airdrop => {
                const card = document.createElement('div');
                card.className = 'airdrop-card';
                card.setAttribute('data-type', airdrop.type);
                let isNew = false;
                
                if (airdrop.publishDate) {
                    const pubDate = airdrop.publishDate instanceof Date ? 
                        airdrop.publishDate : 
                        new Date(airdrop.publishDate);
                    const diffDays = (new Date() - pubDate) / (1000 * 60 * 60 * 24);
                    isNew = !isNaN(diffDays) && diffDays < 4;
                }
                
                const publishDateFormatted = airdrop.publishDate ? 
                    new Intl.DateTimeFormat('es-ES', {
                        day: 'numeric',
                        month: 'long',
                        year: 'numeric'
                    }).format(airdrop.publishDate) : '';
                
                let badgesHTML = '';
                if (airdrop.badges && airdrop.badges.length) {
                    airdrop.badges.forEach(badge => {
                        let badgeClass = 'badge-primary';
                        let badgeText = '';
                        let badgeUrl = '';
                        if (typeof badge === 'string') {
                            badgeText = badge;
                            if (badge === 'Web' && airdrop.webUrl) {
                                badgeUrl = airdrop.webUrl;
                            } else if (badge === 'X' && airdrop.xUrl) {
                                badgeUrl = airdrop.xUrl;
                            } else if (badge === 'Docs' && airdrop.docsUrl) {
                                badgeUrl = airdrop.docsUrl;
                            } else {
                                badgeUrl = '#';
                            }
                            if (badge.toLowerCase().includes('depin')) badgeClass = 'badge-info';
                            if (badge.toLowerCase().includes('testnet')) badgeClass = 'badge-warning';
                            if (badge.toLowerCase().includes('staking')) badgeClass = 'badge-success';
                            if (badge.toLowerCase().includes('gaming')) badgeClass = 'badge-danger';
                            if (badge.toLowerCase().includes('social')) badgeClass = 'badge-primary';
                        }
                        
                        badgesHTML += `<a href="${badgeUrl}" class="badge ${badgeClass}" target="_blank">${badgeText}</a>`;
                    });
                }
                
                card.innerHTML = `
                    <div class="card-type">${airdrop.type.charAt(0).toUpperCase() + airdrop.type.slice(1)}</div>
                    ${isNew ? '<div class="new-badge">NEW</div>' : ''}
                    <div class="card-image" style="background-image: url('${airdrop.image}')"></div>
                    <div class="publish-date">Publicado: ${publishDateFormatted}</div>
                    <div class="card-content">
                        <h3 class="card-title">${airdrop.title}</h3>
                        <p class="card-description">${airdrop.description}</p>
                        <div class="card-details">
                            <div class="detail-item">
                                <i class="fas fa-calendar-alt detail-icon"></i>
                                <span>Available: ${airdrop.launchDate}</span>
                            </div>
                            ${airdrop.funds ? `
                                <div class="detail-item">
                                    <i class="fas fa-coins detail-icon"></i>
                                    <span>Funding: ${airdrop.funds}</span>
                                </div>
                            ` : ''}
                            ${airdrop.code ? `
                                <div class="detail-item">
                                    <i class="fas fa-key detail-icon"></i>
                                    <span>Code: ${airdrop.code}</span>
                                </div>
                            ` : ''}
                        </div>
                        <div>
                            ${badgesHTML}
                        </div>
                        <div class="card-actions">
                            <div style="display: flex; gap: 0.5rem; flex: 1;">
                                <a href="${airdrop.link || '#'}" class="action-btn" target="_blank" style="flex: 1; text-align: center;">Learn More</a>
                                <button class="details-btn" data-id="${airdrop.id}" style="flex: 1; text-align: center;">See More</button>
                            </div>
                            <button class="bookmark-btn"><i class="far fa-bookmark"></i></button>
                        </div>
                    </div>
                `;
                
                grid.appendChild(card);
            });
            
            document.querySelectorAll('.bookmark-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.classList.toggle('saved');
                    const icon = this.querySelector('i');
                    icon.classList.toggle('far');
                    icon.classList.toggle('fas');
                });
            });
        }

        // Función para obtener precios de criptomonedas
        async function fetchCryptoPrices(showLoadingIndicator = true) {
            const container = document.getElementById('crypto-prices-container');
            
            if (showLoadingIndicator) {
                container.innerHTML = `
                    <div class="loading-spinner">
                        <i class="fas fa-spinner fa-spin"></i> Loading cryptocurrency prices...
                    </div>
                `;
            }
            
            try {
                const response = await fetch('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=10&page=1&sparkline=false&price_change_percentage=24h');
                const data = await response.json();
                
                container.innerHTML = '';
                
                const priceGrid = document.createElement('div');
                priceGrid.className = 'crypto-price-grid';
                priceGrid.style.display = 'grid';
                priceGrid.style.gridTemplateColumns = 'repeat(auto-fill, minmax(250px, 1fr))';
                priceGrid.style.gap = '1rem';
                
                data.forEach(crypto => {
                    const priceChange = crypto.price_change_percentage_24h;
                    const isPositive = priceChange > 0;
                    
                    const card = document.createElement('div');
                    card.className = 'crypto-price-card';
                    card.style.backgroundColor = 'white';
                    card.style.borderRadius = 'var(--border-radius)';
                    card.style.padding = '1rem';
                    card.style.boxShadow = '0 4px 6px rgba(0, 0, 0, 0.05)';
                    card.style.display = 'flex';
                    card.style.alignItems = 'center';
                    card.style.transition = 'transform 0.3s';
                    
                    card.innerHTML = `
                        <img src="${crypto.image}" alt="${crypto.name}" style="width: 40px; height: 40px; margin-right: 1rem;">
                        <div style="flex: 1;">
                            <div style="font-weight: bold;">${crypto.name} (${crypto.symbol.toUpperCase()})</div>
                            <div style="font-size: 1.2rem; font-weight: 600;">$${crypto.current_price.toLocaleString()}</div>
                        </div>
                        <div style="display: flex; flex-direction: column; align-items: flex-end;">
                            <div style="font-size: 0.9rem; color: ${isPositive ? 'var(--success)' : 'var(--danger)'}; font-weight: 600;">
                                ${isPositive ? '▲' : '▼'} ${Math.abs(priceChange).toFixed(2)}%
                            </div>
                            <div style="font-size: 0.8rem; color: var(--gray);">24h</div>
                        </div>
                    `;
                    
                    card.addEventListener('mouseover', function() {
                        this.style.transform = 'translateY(-5px)';
                        this.style.boxShadow = '0 10px 15px rgba(0, 0, 0, 0.1)';
                    });
                    
                    card.addEventListener('mouseout', function() {
                        this.style.transform = 'translateY(0)';
                        this.style.boxShadow = '0 4px 6px rgba(0, 0, 0, 0.05)';
                    });
                    
                    priceGrid.appendChild(card);
                });
                
                container.appendChild(priceGrid);
                
                const refreshButton = document.createElement('button');
                refreshButton.className = 'action-btn';
                refreshButton.style.marginTop = '1rem';
                refreshButton.innerHTML = '<i class="fas fa-sync-alt"></i> Refresh Prices';
                refreshButton.style.display = 'block';
                refreshButton.style.margin = '1rem auto 0';
                
                refreshButton.addEventListener('click', function() {
                    this.disabled = true;
                    this.innerHTML = '<i class="fas fa-sync-alt fa-spin"></i> Updating...';
                    fetchCryptoPrices(false).then(() => {
                        this.disabled = false;
                        this.innerHTML = '<i class="fas fa-sync-alt"></i> Refresh Prices';
                    });
                });
                
                container.appendChild(refreshButton);
                
                const timestamp = document.createElement('div');
                timestamp.style.textAlign = 'center';
                timestamp.style.marginTop = '0.5rem';
                timestamp.style.fontSize = '0.9rem';
                timestamp.style.color = 'var(--gray)';
                timestamp.innerHTML = `Last updated: ${new Date().toLocaleTimeString()}`;
                
                container.appendChild(timestamp);
                
                return true;
            } catch (error) {
                console.error('Error fetching crypto prices:', error);
                container.innerHTML = `
                    <div style="text-align: center; padding: 2rem;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 2rem; color: var(--warning); margin-bottom: 1rem;"></i>
                        <p>Failed to load cryptocurrency prices. Please try again later.</p>
                        <button class="action-btn" onclick="fetchCryptoPrices()" style="margin-top: 1rem;">
                            <i class="fas fa-sync-alt"></i> Try Again
                        </button>
                    </div>
                `;
                return false;
            }
        }

        // Lightbox functionality
        let currentImageIndex = 0;
        let allImages = [];

        function openLightbox(mainImage, additionalImages = []) {
            allImages = [mainImage, ...(additionalImages || [])].filter(img => img);
            currentImageIndex = 0;
            
            const modal = document.getElementById('lightbox-modal');
            if (modal) {
                modal.style.display = 'flex';
                
                const img = document.getElementById('lightbox-image');
                if (img) {
                    img.src = allImages[currentImageIndex];
                    
                    const counter = document.getElementById('image-counter');
                    if (counter) {
                        counter.textContent = `${currentImageIndex + 1} / ${allImages.length}`;
                    }
                    
                    const prevBtn = document.getElementById('prev-image');
                    const nextBtn = document.getElementById('next-image');
                    if (prevBtn) prevBtn.style.visibility = 'hidden';
                    if (nextBtn) nextBtn.style.visibility = allImages.length > 1 ? 'visible' : 'hidden';
                }
                
                document.body.style.overflow = 'hidden';
            }
        }

        function updateLightboxImage() {
            const img = document.getElementById('lightbox-image');
            img.src = allImages[currentImageIndex];
            
            document.getElementById('image-counter').textContent = `${currentImageIndex + 1} / ${allImages.length}`;
            
            document.getElementById('prev-image').style.visibility = currentImageIndex > 0 ? 'visible' : 'hidden';
            document.getElementById('next-image').style.visibility = currentImageIndex < allImages.length - 1 ? 'visible' : 'hidden';
        }

        function closeLightbox() {
            document.getElementById('lightbox-modal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Único DOMContentLoaded
        document.addEventListener('DOMContentLoaded', function() {
            // Renderizar airdrops iniciales
            renderAirdrops('all', currentPage);
            
            // Configurar filtros
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    currentPage = 1;
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    renderAirdrops(this.getAttribute('data-filter'), currentPage);
                });
            });
            
            // Configurar búsqueda
            extractSearchTerms();
            
            const searchInput = document.getElementById('search-input');
            const searchBtn = document.querySelector('.search-btn');
            const suggestionsContainer = document.getElementById('search-suggestions');
            
            searchInput.addEventListener('input', showSuggestions);
            searchBtn.addEventListener('click', performSearch);
            
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
            
            searchInput.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    if (currentSuggestions.length > 0) {
                        highlightedIndex = Math.min(highlightedIndex + 1, currentSuggestions.length - 1);
                        showSuggestions();
                    }
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    highlightedIndex = Math.max(highlightedIndex - 1, -1);
                    showSuggestions();
                } else if (e.key === 'Enter' && highlightedIndex >= 0) {
                    e.preventDefault();
                    searchInput.value = currentSuggestions[highlightedIndex];
                    suggestionsContainer.style.display = 'none';
                    performSearch();
                }
            });
            
            document.addEventListener('click', function(e) {
                if (!searchInput.contains(e.target) && !suggestionsContainer.contains(e.target)) {
                    suggestionsContainer.style.display = 'none';
                }
            });

            // Configurar toggle de modo oscuro
            document.querySelector('.theme-toggle').addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                const icon = this.querySelector('i');
                const text = this.querySelector('span');
                
                if (document.body.classList.contains('dark-mode')) {
                    icon.classList.remove('fa-moon');
                    icon.classList.add('fa-sun');
                    text.textContent = 'Modo Claro';
                } else {
                    icon.classList.remove('fa-sun');
                    icon.classList.add('fa-moon');
                    text.textContent = 'Modo Oscuro';
                }
            });

            // Configurar botones de detalles
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('details-btn') || e.target.closest('.details-btn')) {
                    const button = e.target.classList.contains('details-btn') ? e.target : e.target.closest('.details-btn');
                    const airdropId = button.getAttribute('data-id');
                    const airdrop = airdrops.find(a => a.id == airdropId);
                    
                    if (!airdrop) return;
                    const projectSlug = airdrop.title.toLowerCase().replace(/\s+/g, '-');
                    const newUrl = `${window.location.pathname}?project=${projectSlug}-${airdropId}`;
                    window.history.pushState({ id: airdropId }, '', newUrl);
                    
                    // [Resto del código para mostrar el modal de detalles]
                }
            });

            // Configurar lightbox
            document.getElementById('close-lightbox').addEventListener('click', closeLightbox);
            
            document.getElementById('prev-image').addEventListener('click', function() {
                if (currentImageIndex > 0) {
                    currentImageIndex--;
                    updateLightboxImage();
                }
            });
            
            document.getElementById('next-image').addEventListener('click', function() {
                if (currentImageIndex < allImages.length - 1) {
                    currentImageIndex++;
                    updateLightboxImage();
                }
            });
            
            document.getElementById('lightbox-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeLightbox();
                }
            });
            
            document.addEventListener('keydown', function(e) {
                if (document.getElementById('lightbox-modal').style.display === 'flex') {
                    if (e.key === 'Escape') {
                        closeLightbox();
                    } else if (e.key === 'ArrowLeft' && currentImageIndex > 0) {
                        currentImageIndex--;
                        updateLightboxImage();
                    } else if (e.key === 'ArrowRight' && currentImageIndex < allImages.length - 1) {
                        currentImageIndex++;
                        updateLightboxImage();
                    }
                }
            });

            // Manejo de URL para detalles de proyecto
            const urlParams = new URLSearchParams(window.location.search);
            const projectParam = urlParams.get('project');
            if (projectParam) {
                const projectId = projectParam.split('-').pop();
                const airdrop = airdrops.find(a => a.id == projectId);
                if (airdrop) {
                    setTimeout(() => {
                        renderAirdrops();
                        const detailsBtn = document.querySelector(`.details-btn[data-id="${projectId}"]`);
                        if (detailsBtn) detailsBtn.click();
                    }, 100);
                }
            }

            // Configurar navegación
            const navLinks = document.querySelectorAll('nav ul li a');
            const trendingSection = document.querySelector('.trending-prices');
            
            navLinks.forEach(function(link) {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    if (this.innerHTML.includes('fa-fire') && this.innerHTML.includes('Trending')) {
                        document.querySelector('.hero').style.display = 'none';
                        document.querySelector('main.container').style.display = 'none';
                        trendingSection.style.display = 'block';
                        fetchCryptoPrices(true);
                    }
                    
                    if (this.innerHTML.includes('fa-home') && this.innerHTML.includes('Inicio')) {
                        document.querySelector('.hero').style.display = 'block';
                        document.querySelector('main.container').style.display = 'block';
                        trendingSection.style.display = 'none';
                    }
                });
            });

            // Pre-fetch prices
            fetchCryptoPrices(true);
            
            // Actualizar precios cada 30 segundos cuando la sección está visible
            setInterval(function() {
                if (trendingSection.style.display !== 'none') {
                    fetchCryptoPrices(false);
                }
            }, 30000);
        });

        // Helper function for type classes
        function getTypeClass(type) {
            switch(type.toLowerCase()) {
                case 'depin': return 'info';
                case 'testnet': return 'warning';
                case 'staking': return 'success';
                case 'gaming': return 'danger';
                case 'social': return 'primary';
                default: return 'secondary';
            }
        }
    </script>

    <script src="data_proyect.js"></script>
</body>
</html>
